<div class="card-container" *ngIf="events.length > 0; else noEvents">
  <div class="event-card" *ngFor="let event of events">
    <h3 class="event-title">{{ event.nombre }}</h3>
    <p><strong>Fecha de Inicio:</strong> {{ event.fechaInicioEvento | date }}</p>
    <p><strong>Fecha de Fin:</strong> {{ event.fechaFinEvento | date }}</p>
    <p><strong>Categoría:</strong> {{ event.categoria }}</p>
    <p><strong>Modalidad:</strong> {{ event.modalidades }}</p>
    <p><strong>Detalles:</strong> {{ event.detalles }}</p>
    <p class="card-text">
      Estado: 
      <span [ngClass]="{
        'text-success': event.estado === 'En Inscripción',
        'text-warning': event.estado === 'Próximo',
        'text-danger': event.estado === 'Finalizado'
      }">
        <strong>{{ event.estado }}</strong>
      </span>
    </p>
    <div class="button-group">
      <button class="view-more-btn" (click)="verMas(event)">Ver Más</button>
      <button *ngIf="event.estado === 'INSCRIPCIONES'" class="register-btn" (click)="tipoUsuario === 'ADMIN' ? inscribirAtleta(event) : inscribirse(event)">
        {{ tipoUsuario === 'ADMIN' ? 'Inscribir Atleta' : 'Inscribirse' }}
      </button>
    </div>
  </div>
</div>

<ng-template #noEvents>
  <p>No hay eventos seleccionados.</p>
</ng-template>

<!-- Modal -->
<div *ngIf="selectedEvent" class="modal">
  <div class="modal-content">
    <button class="close-btn" (click)="cerrarModal()">×</button>

    <div class="header-section">
      <h2 class="event-title">{{ selectedEvent.nombre }}</h2>
      <p class="event-dates">
        <strong>Del:</strong> {{ selectedEvent.fechaInicioEvento | date: 'fullDate' }}
        <strong>al:</strong> {{ selectedEvent.fechaFinEvento | date: 'fullDate' }}
      </p>
    </div>

    <div class="details-section">
      <h3>Detalles del Evento</h3>
      <p><strong>Modalidad:</strong> {{ selectedEvent.modalidades }}</p>
      <p><strong>Categoría:</strong> {{ selectedEvent.categoria }}</p>
      <p><strong>Descripción:</strong> {{ selectedEvent.detalles }}</p>
    </div>

    <div class="activities-section" *ngIf="selectedEvent.actividades?.length > 0">
      <h3>Actividades Programadas</h3>
      <table class="activities-table">
        <thead>
          <tr>
            <th>Actividad</th>
            <th>Fecha</th>
            <th>Horario</th>
            <th>Ubicación</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let actividad of selectedEvent.actividades">
            <td>{{ actividad.nombre }}</td>
            <td>{{ actividad.dia | date: 'fullDate' }}</td>
            <td>{{ actividad.horaInicio }} - {{ actividad.horaFin }}</td>
            <td>{{ actividad.instalacion.nombre }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div *ngIf="selectedEvent.actividades?.length === 0">
      <p class="no-activities">No hay actividades programadas para este evento.</p>
    </div>
  </div>
</div>

<!-- Modal para seleccionar atleta -->
<div *ngIf="showAtletasModal" class="modal">
  <div class="modal-content">
    <button class="close-btn" (click)="cerrarModal()">×</button>
    <h3>Seleccionar Atleta</h3>
    <ul class="athlete-list">
      <li
        *ngFor="let atleta of atletas"
        (click)="seleccionarAtleta(atleta)"
        class="athlete-item"
      >
        {{ atleta.nombreCompleto }} ({{ atleta.correo }})
      </li>
    </ul>
  </div>
</div>
